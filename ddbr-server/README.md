# DDBR-Server

分布式数据库复制服务器 (Distributed Database Replication Server)

## 项目架构

```
ddbr-server/
├── api/               // 通信接口层
│   ├── http/          // HTTP API
│   └── rpc/           // RPC接口实现
├── client/            // 客户端调用
├── cmd/               // 入口命令
├── configs/           // 配置文件
├── constant/          // 常量定义
├── infra/             // 基础设施层
│   ├── initialization/ // 初始化逻辑
│   ├── raft/          // Raft实现
│   ├── storage/       // 存储实现
│   └── network/       // 网络层封装
├── log/               // 日志模块
├── model/             // 数据模型
├── repo/              // 仓库层
├── service/           // 业务逻辑服务
├── utils/             // 工具函数
├── main.go            // 程序入口
└── Dockerfile         // 容器构建文件
```

## 代码结构说明

- **api**: 对外提供的接口层，包括HTTP和RPC接口
- **client**: 用于调用外部服务的客户端代码
- **infra**: 基础设施层，包含Raft共识算法实现、初始化逻辑等
- **service**: 核心业务逻辑层，实现具体功能
- **repo**: 数据访问层，负责数据持久化
- **model**: 数据模型定义

## 设计原则

1. **分层架构**: 明确的层次结构，下层不依赖上层
2. **依赖注入**: 通过接口解耦各模块
3. **单一职责**: 每个模块只负责一个功能点
4. **错误处理**: 统一的错误处理机制
5. **配置管理**: 集中化的配置管理

## 重构内容

1. 调整目录结构，符合Go项目最佳实践
2. 引入依赖注入框架，减少硬编码依赖
3. 优化错误处理机制
4. 增强日志系统
5. 简化配置管理
6. 增加单元测试覆盖率 